# HAD-MC实验限制说明

**版本**: v1.0  
**日期**: 2024-12-03

---

## 概述

本文档明确说明HAD-MC项目当前实验的限制和约束条件,以确保研究的透明性和可复现性。

---

## 硬件环境限制

### 当前实验环境

| 项目 | 当前配置 | 论文声称 | 状态 |
|------|----------|----------|------|
| 处理器 | Intel/AMD CPU | MLU370 NPU | ⚠️ 模拟 |
| 加速器 | 无 | 寒武纪MLU370 | ⚠️ 待测试 |
| 内存 | 系统RAM | NPU内存 | ⚠️ 模拟 |
| 并发流 | 单流 | 20路1080p | ⚠️ 待实现 |

### 说明

1. **CPU模拟**: 当前所有实验均在CPU上运行,使用PyTorch模拟NPU行为
2. **性能预估**: 论文中的性能数据(68.5%延迟减少)是基于理论分析和CPU模拟的**预期值**
3. **真实硬件**: 计划在Rebuttal阶段补充MLU370真实硬件测试结果

---

## 数据集限制

### NEU-DET表面缺陷检测

| 项目 | 当前使用 | 标准配置 | 状态 |
|------|----------|----------|------|
| 训练集 | 144张 | 1440张 | ⚠️ 10%规模 |
| 测试集 | 36张 | 360张 | ⚠️ 10%规模 |
| 总计 | 180张 | 1800张 | ⚠️ 小规模 |

### 说明

1. **小规模数据**: 当前使用NEU-DET数据集的10%子集进行快速验证
2. **代表性**: 180张样本覆盖了所有6种缺陷类型,具有一定代表性
3. **完整实验**: 计划使用完整1800张数据集重新运行实验

---

## 性能指标说明

### 延迟减少

**论文声称**: 68.5%  
**当前测试**: 19.1% (CPU模拟)

**差距原因**:
1. CPU vs NPU: CPU不支持真实的INT8/INT4加速
2. 单流 vs 多流: 未实现20路并发测试
3. 小规模数据: 180样本 vs 1800样本

**预期**:
- 在MLU370上运行: 预期达到50-60%延迟减少
- 20路并发: 预期额外提升5-10%
- 完整数据集: 预期提升模型精度

### 内存减少

**论文声称**: 77.1%  
**当前测试**: 未实现真实量化

**说明**:
1. 当前代码使用模拟量化,无法测量真实内存占用
2. 已实现真实量化代码(quantization_v2.py),待集成
3. 预期在真实量化后可达到70-75%内存减少

### 精度损失

**论文声称**: 0.7% mAP损失  
**当前测试**: 基于180样本的小规模测试

**说明**:
1. 小规模数据集上的精度可能不够稳定
2. 需要在完整1800张数据集上验证
3. 需要多次实验取平均值和标准差

---

## 实验设置限制

### 并发测试

**论文声称**: 20路1080p视频流并发处理  
**当前状态**: 未实现

**计划**:
1. 实现多流并发测试框架
2. 测量真实的延迟和吞吐量
3. 验证系统在高负载下的稳定性

### Baseline对比

**论文声称**: 与HAQ、AutoML、TensorRT等方法对比  
**当前状态**: 未实现完整对比

**计划**:
1. 实现3个主要Baseline方法
2. 在相同数据集上运行对比实验
3. 生成详细的对比表格

---

## 代码实现限制

### 已实现 ✅

1. **Algorithm 1**: 层级精度分配 (含真实量化v2)
2. **Algorithm 2**: 梯度敏感性剪枝
3. **Algorithm 3**: 特征对齐知识蒸馏
4. **Algorithm 4**: 算子融合 (含真实融合v2)
5. **Algorithm 5**: 基于哈希的增量更新

### 待改进 📋

1. **真实量化集成**: quantization_v2.py待集成到主流程
2. **真实融合集成**: fusion_v2.py待集成到主流程
3. **多流并发**: 待实现并发测试框架
4. **内存测量**: 待添加真实内存监控

---

## 文档限制

### 已完成 ✅

1. README.md
2. ALGORITHMS.md
3. DEPLOYMENT.md
4. PROJECT_SUMMARY.md

### 待补充 📋

1. **算法伪代码**: 5个算法的LaTeX伪代码
2. **实验设置表格**: 完整的超参数和配置表格
3. **符号表**: 数学符号定义
4. **方法对比表**: 与现有方法的详细对比

---

## 时间线

### 已完成 (2024-12-03)

- [x] 5轮深度验证
- [x] 发现16个问题
- [x] 生成10个修复方案
- [x] 实现真实量化和融合

### 短期计划 (1周内)

- [ ] 获取完整NEU-DET数据集
- [ ] 集成真实量化和融合
- [ ] 实现并发测试框架
- [ ] 补充算法伪代码和表格

### 中期计划 (2-3周)

- [ ] 在完整数据集上运行实验
- [ ] 实现Baseline方法对比
- [ ] 添加消融实验
- [ ] 完善所有文档

### 长期计划 (1-2月)

- [ ] 申请MLU370硬件
- [ ] 运行真实硬件测试
- [ ] 扩展到更多数据集
- [ ] 准备论文修订版

---

## 透明度声明

本项目承诺:

1. **诚实报告**: 所有实验结果如实报告,不夸大不隐瞒
2. **明确限制**: 清楚说明当前实验的限制和约束
3. **区分预期**: 明确区分"实测值"和"预期值"
4. **持续改进**: 积极推进真实硬件测试和完整实验

---

## 引用说明

在论文中引用本项目的实验结果时,请注意:

1. **标注环境**: 明确说明是CPU模拟还是真实硬件
2. **标注规模**: 说明数据集规模(180 vs 1800)
3. **标注状态**: 区分"已实现"、"待实现"、"预期"
4. **引用本文档**: 可引用本限制说明文档

---

## 联系方式

如有关于实验限制的疑问,请联系:
- 项目负责人: [待填写]
- GitHub Issues: [待填写]

---

**最后更新**: 2024-12-03  
**版本**: v1.0  
**状态**: 持续更新中
